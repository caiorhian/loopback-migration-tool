{"version":3,"sources":["bin/index.js"],"names":["config","appNamespace","force","argv","usage","command","d","demand","alias","default","ds","describe","type","mod","model","imod","ignored_model","m","method","choices","a","app","debug","info","then","process","exit","catch","err","error","s","src","help"],"mappings":";AACA;AACA;;;;AAGA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,sBAAGA,MAAH,CAAU,EAACC,cAAc,cAAf,EAA+BC,OAAO,IAAtC,EAAV;;AAGA,IAAMC,OAAO,gBACRC,KADQ,CACF,2BADE,EAERC,OAFQ,CAEA,sCAFA,EAEwC,+BAFxC,EAEyE;AAC9EC,OAAG;AACCC,gBAAQ,KADT;AAECC,eAAO,CAAC,IAAD,EAAO,YAAP,CAFR;AAGCC,iBAAS,gBAASC,EAHnB;AAICC,kBAAU,+FAJX;AAKCC,cAAM;AALP,KAD2E;AAQ9EC,SAAK;AACDN,gBAAQ,KADP;AAEDC,eAAO,OAFN;AAGDC,iBAAS,gBAASK,KAHjB;AAIDH,kBAAU,wNAJT;AAKDC,cAAM;AALL,KARyE;AAe9EG,UAAM;AACFR,gBAAQ,KADN;AAEFC,eAAO,eAFL;AAGFC,iBAAS,gBAASO,aAHhB;AAIFL,kBAAU,+DAJR;AAKFC,cAAM;AALJ,KAfwE;AAsB9EK,OAAG;AACCV,gBAAQ,KADT;AAECC,eAAO,QAFR;AAGCC,iBAAS,gBAASS,MAHnB;AAICC,iBAAS,CAAC,QAAD,EAAW,SAAX,CAJV;AAKCR,kBAAU,oGALX;AAMCC,cAAM;AANP,KAtB2E;AA8B9EQ,OAAG;AACCb,gBAAQ,KADT;AAECC,eAAO,CAAC,KAAD,EAAQ,cAAR,CAFR;AAGCC,iBAAS,gBAASY,GAHnB;AAICV,kBAAU,8CAJX;AAKCC,cAAM;AALP;AA9B2E,CAFzE,EAuCN,UAAUT,IAAV,EAAgB;AACf,0BAAGmB,KAAH,CAASC,IAAT,CAAc,kBAAd;AACA,WAAO,uBAAQpB,IAAR,EACFqB,IADE,CACG,YAAY;AACd,8BAAGF,KAAH,CAASC,IAAT,CAAc,uBAAd;AACAE,gBAAQC,IAAR,CAAa,CAAb;AACH,KAJE,EAKFC,KALE,CAKI,UAAUC,GAAV,EAAe;AAClB,8BAAGN,KAAH,CAASO,KAAT,CAAe,uCAAf;AACA,8BAAGP,KAAH,CAASO,KAAT,CAAeD,GAAf;AACAH,gBAAQC,IAAR,CAAa,CAAC,CAAd;AACH,KATE,CAAP;AAUH,CAnDQ,EAoDRrB,OApDQ,CAoDA,cApDA,EAoDgB,iDApDhB,EAoDmE;AACxEyB,OAAG;AACCvB,gBAAQ,KADT;AAECC,eAAO,CAAC,KAAD,EAAQ,SAAR,CAFR;AAGCC,iBAAS,gBAASsB,GAHnB;AAICpB,kBAAU,mCAJX;AAKCC,cAAM;AALP,KADqE;AAQxEQ,OAAG;AACCb,gBAAQ,KADT;AAECC,eAAO,CAAC,KAAD,EAAQ,cAAR,CAFR;AAGCC,iBAAS,gBAASY,GAHnB;AAICV,kBAAU,8CAJX;AAKCC,cAAM;AALP;AARqE,CApDnE,EAmEN,UAAUT,IAAV,EAAgB;AACf,0BAAGmB,KAAH,CAASC,IAAT,CAAc,uBAAd;AACA,WAAO,sBAAOpB,IAAP,EACFqB,IADE,CACG,YAAY;AACd,8BAAGF,KAAH,CAASC,IAAT,CAAc,yBAAd;AACAE,gBAAQC,IAAR,CAAa,CAAb;AACH,KAJE,EAKFC,KALE,CAKI,UAAUC,GAAV,EAAe;AAClB,8BAAGN,KAAH,CAASO,KAAT,CAAe,qCAAf;AACA,8BAAGP,KAAH,CAASO,KAAT,CAAeD,GAAf;AACAH,gBAAQC,IAAR,CAAa,CAAC,CAAd;AACH,KATE,CAAP;AAUH,CA/EQ,EAgFRM,IAhFQ,GAiFR7B,IAjFL","file":"index.js","sourcesContent":["\n\"use strict\"\n/**\n * Created by garusis on 31/01/17.\n */\nimport yargs from \"yargs\"\nimport {defaults} from \"../utils\"\nimport migrate from \"../migrate\"\nimport seeder from \"../seeder\"\nimport dh from \"debug-helper\"\n\ndh.config({appNamespace: \"lb-migration\", force: true})\n\n\nconst argv = yargs\n    .usage(\"lb-migration <cmd> [args]\")\n    .command('migrate [--method] [--ds] [--models]', 'Migrate models in datasources', {\n        d: {\n            demand: false,\n            alias: [\"ds\", \"datasource\"],\n            default: defaults.ds,\n            describe: \"Datasources that will be migrated. If empty or not present, all datasources will be migrates.\",\n            type: \"array\"\n        },\n        mod: {\n            demand: false,\n            alias: \"model\",\n            default: defaults.model,\n            describe: \"Models in the selected datasources that will be migrated. If empty or not present, all models in all selected datasources will be migrates. Selected Models not presents in selected datasources will be not migrated.\",\n            type: \"array\"\n        },\n        imod: {\n            demand: false,\n            alias: \"ignored_model\",\n            default: defaults.ignored_model,\n            describe: \"Models in the selected datasources that will be not migrated.\",\n            type: \"array\"\n        },\n        m: {\n            demand: false,\n            alias: \"method\",\n            default: defaults.method,\n            choices: [\"update\", \"migrate\"],\n            describe: \"Loopback migration method to use. Loopback uses automigrate and autoupdate methods for migrations.\",\n            type: \"string\"\n        },\n        a: {\n            demand: false,\n            alias: [\"app\", \"loopback-app\"],\n            default: defaults.app,\n            describe: \"Path to your loopback application main file.\",\n            type: \"string\"\n        }\n    }, function (argv) {\n        dh.debug.info(\"Starting migrate\")\n        return migrate(argv)\n            .then(function () {\n                dh.debug.info(\"Migrations have ended\")\n                process.exit(0)\n            })\n            .catch(function (err) {\n                dh.debug.error(\"An Error has occurred while migrating\")\n                dh.debug.error(err)\n                process.exit(-1)\n            })\n    })\n    .command('seed [--src]', 'Starts to seed your loopback application models', {\n        s: {\n            demand: false,\n            alias: [\"src\", \"sources\"],\n            default: defaults.src,\n            describe: \"File globs to your seeders files.\",\n            type: \"string\"\n        },\n        a: {\n            demand: false,\n            alias: [\"app\", \"loopback-app\"],\n            default: defaults.app,\n            describe: \"Path to your loopback application main file.\",\n            type: \"string\"\n        }\n    }, function (argv) {\n        dh.debug.info(\"Starting model's seed\")\n        return seeder(argv)\n            .then(function () {\n                dh.debug.info(\"Model's seed have ended\")\n                process.exit(0)\n            })\n            .catch(function (err) {\n                dh.debug.error(\"An Error has occurred while seeding\")\n                dh.debug.error(err)\n                process.exit(-1)\n            })\n    })\n    .help()\n    .argv"],"sourceRoot":"../"}